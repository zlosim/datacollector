<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
      http://www.apache.org/licenses/LICENSE-2.0
      
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="concept_atl_ytf_p1b">
 <title>Local Buffer Resource Requirements</title>
 <conbody>
        <p><indexterm>Oracle CDC Client origin<indexterm>local buffer
                prerequisite</indexterm></indexterm>Before using local buffers, you should verify
            that the allocated resources are sufficient for the needs of the pipeline.</p>
  <p>Use the following guidelines based on the local buffering option that you use:<dl>
                <dlentry>
                    <dt>In memory </dt>
                    <dd>When buffering in memory, the origin buffers the LogMiner redo SQL
                        statements returned by Oracle. It processes the data after receiving a
                        commit for the statement.</dd>
                    <dd>Before buffering in memory, increase the <ph
                            conref="../Reusable_Content/ReusablePhrases.dita#concept_vhs_5tz_xp/pName-long"
                        /> Java heap size to accommodate the information that you expect the
                        pipeline to receive. </dd>
                    <dd>Use the following equation to estimate the Java heap size requirements:</dd>
                    <dd>
                        <p>
                            <codeblock>Required Memory = (L * (30 + S) * T * 1.5) bytes</codeblock>
                        </p>
                        <p>
                            <ul id="ul_g1d_ms2_p1b">
                                <li>L - Maximum number of statements LogMiner generates for each
                                    transaction. <p>Each changed row generates one statement with
                                        all field names and values. </p></li>
                                <li>S - Maximum length in characters of each redo SQL statement
                                    generated by LogMiner, including all field names and values.
                                        <p>For example, the following SQL statement contains 92
                                        characters, including spaces and punctuation.
                                        <codeblock>insert into "SYS"."Y"("ID","D") values ('690054',TO_TIMESTAMP('2017-07-18 02:00:00.389390'))</codeblock></p></li>
                                <li>T - Maximum number of transactions in flight for the tables at
                                    any given time.</li>
                            </ul>
                        </p>
                    </dd>
                    <dd>30 represents the number of bytes in the statement ID, which is also stored.
                    </dd>
                </dlentry>
                <dlentry>
                    <dt>To disk</dt>
                    <dd>When buffering to disk, the origin stores only the statement ID for each SQL
                        query in memory. Then it saves the queries to disk. </dd>
                    <dd>Note that when buffering to disk, Data Collector clears the buffered data
                        when the pipeline starts and stops. When you restart a pipeline, Data
                        Collector uses the last-saved offset unless you reset the origin.</dd>
                    <dd>Before buffering to disk, ensure that enough space is available on the local
                        disk. You might also increase the <ph
                            conref="../Reusable_Content/ReusablePhrases.dita#concept_vhs_5tz_xp/pName-long"
                        /> Java heap size, but to a lesser degree than when buffering fully in
                        memory. </dd>
                    <dd>Use the following calculation to determine the amount of disk space that the
                        pipeline
                            requires:<codeblock>Required Disk Space = (L * S * T * 1.5) bytes</codeblock><ul
                            id="ul_avx_bqk_p1b">
                            <li>L - Maximum number of statements LogMiner generates for each
                                transaction. <p>Each changed row generates one statement with all
                                    field names and values. </p></li>
                            <li>S - Maximum length in characters of each redo SQL statement
                                generated by LogMiner, including all field names and values. <p>For
                                    example, the following SQL statement contains 92 characters,
                                    including spaces and punctuation.
                                    <codeblock>insert into "SYS"."Y"("ID","D") values ('690054',TO_TIMESTAMP('2017-07-18 02:00:00.389390'))</codeblock></p></li>
                            <li>T - Maximum number of transactions in flight for the tables at any
                                given time.</li>
                        </ul></dd>
                    <dd>Use the following equation to estimate the Java heap size required by the
                        pipeline:</dd>
                    <dd>
                        <codeblock>Required Memory = (L * T * 30 * 1.5) bytes</codeblock>
                        <ul id="ul_ukj_qv2_p1b">
                            <li>L - Maximum number of statements LogMiner generates for each
                                transaction. <p>Each changed row generates one statement with all
                                    field names and values. </p></li>
                            <li>T: Maximum number of transactions in flight for the tables at any
                                given time.</li>
                        </ul>
                    </dd>
                </dlentry>
            </dl></p>
        <p><ph
                conref="../Reusable_Content/ReusablePhrases.dita#concept_vhs_5tz_xp/SDCDPM-JavaHeapSize"
            /></p>
 </conbody>
</concept>
