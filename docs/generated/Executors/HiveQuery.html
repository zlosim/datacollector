
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The Hive Query executor connects to Hive or Impala and performs one or more user-defined Hive or Impala queries each time it receives an event record. Use the Hive Query executor as part of an event ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Hive Query Executor" /><meta name="DC.Relation" scheme="URI" content="../Executors/Executors-title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_kjw_llk_fx" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Hive Query Executor</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Executors/Executors-title.html" title="Executors">Executors</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Executors/Executors-title.html" title="Executors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Executors</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_kjw_llk_fx">
 <h1 class="title topictitle1">Hive Query Executor</h1>

 <div class="body conbody">
  <p class="p">The Hive Query executor connects to Hive or Impala
            and performs one or more user-defined Hive or Impala queries each time it receives an
            event record. </p>

        <p class="p">Use the Hive Query executor as part of an event stream to perform event-driven queries in
            Hive or Impala. <span class="ph">You can use the executor in any logical way, such as
                        running Hive or Impala queries after the Hive Metadata destination updates
                        the Hive metastore, or after the Hadoop FS or MapR FS destination closes
                        files.</span></p>

        <p class="p">For example, you can use the Hive Query executor to perform the Invalidate Metadata query
            for Impala as part of the <a class="xref" href="../Hive_Drift_Solution/HiveDriftSolution_title.html#concept_phk_bdf_2w">Drift
                Synchronization Solution for Hive</a> or to configure table properties for
            newly-created tables.</p>

        <p class="p">When using the Hive Query executor with Impala, you can use the default driver included
            with <span class="ph">Data
                  Collector</span>, or you can install an Impala JDBC driver. </p>

        <div class="p">
            <div class="note note"><span class="notetitle">Note:</span> <span class="ph" id="concept_kjw_llk_fx__d33389e4729">The Hive Query executor waits for
                              each query to complete before continuing with the next query for the
                              same event record. It also waits for all queries to complete before
                              starting the queries for the next event record. Depending on the speed
                              of the pipeline and the complexity of the queries, the wait for query
                              completion can slow pipeline performance.</span></div>

        </div>

        <p class="p">When you configure the Hive Query executor, you configure JDBC connection information to
            Hive, and optionally add additional HDFS configuration properties to use. You specify
            the queries that you want to run and indicate whether to run the remaining queries after
            a query fails.</p>

        <p class="p">You can also configure the executor to generate events for
                  another event stream. <span class="ph" id="concept_kjw_llk_fx__d33389e1913">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

        <p class="p">For a case study about using the Hive Query executor, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_szz_xwm_lx">Case Study: Impala Metadata Updates for DDS for Hive</a>.</p>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_zld_35h_vx">
 <h2 class="title topictitle2">Related Event Generating Stages</h2>

 <div class="body conbody">
        <p class="p">Use the Hive Query executor in an event stream. The
            Hive Query executor is designed to run a set of Hive or Impala queries after receiving
            an event record. You can use the Hive Query executor with any event-generating stage
            where the logic suits your needs. </p>

        <p class="p">When implementing the Drift Synchronization Solution for Hive with Impala, use the
            executor to run the Invalidate Metadata query after the Hive Metastore destination
            changes table structures and after the Hadoop FS destination writes files to Hive. </p>

    </div>

</div>
<div class="topic concept nested1" id="concept_rfq_xk4_nbb">
 <h2 class="title topictitle2">Installing the Impala Driver</h2>

 <div class="body conbody">
  <p class="p">You can use the Apache Hive JDBC
            driver included with <span class="ph">Data
                  Collector</span> to
            perform Impala queries. However, some distributions recommend using a native Impala JDBC
            driver. </p>

        <p class="p">To use the included Apache Hive JDBC driver included with <span class="ph">Data
                  Collector</span>,
            you do not need to perform any additional steps. </p>

        <div class="p">To use an Impala JDBC driver, perform the following steps:<ol class="ol" id="concept_rfq_xk4_nbb__ol_ilv_fm4_nbb">
                <li class="li">Download the native Impala JDBC driver for the Hive distribution that you use. </li>

                <li class="li">Install the driver as an external library for the stage library used by the Hive
                    Query executor. <p class="p">For example, say the executor is configured to use the CDH
                        5.12.0 stage library. If you use the Package Manager to install the driver,
                        then in the Install External Libraries dialog box, you select the CDH 5.12.0
                        stage library, then browse to select the Impala driver libraries to install.
                    </p>
</li>

            </ol>
</div>

        <p class="p"><span class="ph">For information about installing additional drivers, see
                              <a class="xref" href="../Configuration/ExternalLibs.html#concept_pdv_qlw_ft" title="After you've set up the external directory, use the Package Manager within Data Collector to install external libraries.To manually install external libraries, use the required procedure for your installation type.">Install External Libraries</a>.</span></p>

        <p class="p">If you have trouble determining the URL format to use when configuring the executor,
            check out our <a class="xref" href="https://ask.streamsets.com/question/7/how-do-you-configure-a-hive-impala-jdbc-driver-for-data-collector/?answer=8#post-id-8" target="_blank">Ask StreamSets post</a>.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_jzl_yrr_mx">
 <h2 class="title topictitle2">Hive and Impala Queries</h2>

 <div class="body conbody">
        <p class="p">You can use the Hive Query executor to execute a set of
            Hive or Impala queries each time the executor receives an event record. </p>

        <p class="p"><span class="ph">The Hive Query executor waits for
                              each query to complete before continuing with the next query for the
                              same event record. It also waits for all queries to complete before
                              starting the queries for the next event record. Depending on the speed
                              of the pipeline and the complexity of the queries, the wait for query
                              completion can slow pipeline performance.</span></p>

        <p class="p">When possible, avoid using Hive Query executor to run long-running queries. Also, when
            running multiple queries for an event record, you can configure the executor to skip the
            remaining queries if a query fails. By default, the executor continues to run the rest
            of the queries. </p>

        <p class="p">You can use the fields and attributes in an event record in queries. For example, for
            event records generated when Hive Metastore creates or updates a table, you can use the
            table name in the event record to perform additional tasks.</p>

        <p class="p">For a list of field names and descriptions in an event record, see the "Event Records"
            documentation for the event generating stage.</p>

    </div>

</div>
<div class="topic concept nested1" id="concept_hqg_nzh_vx">
 <h2 class="title topictitle2">Impala Queries for the Drift Synchronization Solution for Hive</h2>

 <div class="body conbody">
        <p class="p">The Drift Synchronization Solution for Hive
            enables a pipeline to automatically create and update Hive tables and to write files to
            the tables. </p>

        <p class="p">When implementing the Drift Synchronization Solution for Hive with Impala, you can use
            the Hive Query executor to submit an invalidate metadata query each time you need to
            update the Impala metadata cache. For a detailed example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_szz_xwm_lx">Case Study: Impala Metadata Updates for DDS for Hive</a>.</p>

        <div class="p">Connect a Hive Query executor to the event stream from the Hive Metastore destination and
            the Hadoop FS destination. You can use the same executor for both, or use a separate
            executor for each.<dl class="dl">
                
                    <dt class="dt dlterm">Processing event records from the Hive Metastore destination</dt>

                    <dd class="dd">The Hive Metastore destination generates an event record each time it
                        changes a table and places the table name in the "table" record header
                        attribute. Use the following query to update the Impala metadata cache:
                        <pre class="pre codeblock">invalidate metadata ${record:attribute('/table')}</pre>
</dd>

                    <dd class="dd">When the Hive Query executor receives the event record, it runs the
                        Invalidate Metadata query on the table specified in the event record. </dd>

                
                
                    <dt class="dt dlterm">Processing event records from the Hadoop FS destination</dt>

                    <dd class="dd">The Hadoop FS destination generates an event record each time it closes a
                        file. It places the file path in a "filepath" field in the event record. If
                        you use a separate Hive Query executor for each destination, use the
                        following query to update the Impala
                        cache:<pre class="pre codeblock">invalidate metadata `${file:pathElement(record:value('/filepath'), -3)}`.
`${file:pathElement(record:value('/filepath'), -2)}`      </pre>
</dd>

                    <dd class="dd">This expression uses the third-to-last section of the path as the database
                        name, and the second-to-last section of the path as the table name. </dd>

                    <dd class="dd">If you want to use the same Hive Query executor to process records from Hive
                        Query and Hadoop FS, add an Expression Evaluator in the Hadoop FS event
                        stream to perform this processing. For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_szz_xwm_lx">Case Study: Impala Metadata Updates for DDS for Hive</a>.</dd>

                
            </dl>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_arl_xx3_my">
 <h2 class="title topictitle2">Event Generation</h2>

 <div class="body conbody">
  <p class="p">The Hive Query executor can generate events that
            you can use in an event stream. </p>

        <p class="p">The executor submits queries to Hive each time it receives an event record. When you
            enable event generation, the executor generates events each time it determines if the
            submitted query has completed. </p>

        <div class="p">Hive Query events can be used in any logical way. For example: <ul class="ul" id="concept_arl_xx3_my__ul_dzf_tpg_zx">
                <li class="li">With the Email executor to send a custom email
                              after receiving an event.<p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_t2t_lp5_xz">Case Study: Sending Email</a>.</p>
</li>

                <li class="li">With a destination to store event information.
                                    <p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_ocb_nnl_px">Case Study: Event Storage</a>.</p>
</li>

            </ul>
</div>

        <p class="p"><span class="ph">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

 </div>

<div class="topic concept nested2" id="concept_iwg_r2p_my">
 <h3 class="title topictitle3">Event Records</h3>

 <div class="body conbody">
        <div class="p">Event records generated by the Hive Query
            executor have the following event-related record header attributes. Record header
            attributes are stored as String values:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_iwg_r2p_my__table_brz_3gp_qx" class="table" frame="border" border="1" rules="all">
                    
                    
                    <thead class="thead" align="left">
                        <tr>
                            <th class="entry" valign="top" width="30%" id="d183214e356">Record Header Attribute</th>

                            <th class="entry" valign="top" width="70%" id="d183214e359">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr>
                            <td class="entry" valign="top" width="30%" headers="d183214e356 ">sdc.event.type</td>

                            <td class="entry" valign="top" width="70%" headers="d183214e359 ">Event type. Uses one of the following event types:<ul class="ul" id="concept_iwg_r2p_my__ul_m12_mgp_qx">
                                    <li class="li">successful-query - Generated when the executor determines
                                        that Hive successfully ran the submitted query. </li>

                                    <li class="li">failed-query - Generated when the executor determines that
                                        Hive failed to run the query.</li>

                                </ul>
</td>

                        </tr>

                        <tr>
       <td class="entry" valign="top" width="30%" headers="d183214e356 ">sdc.event.version</td>

       <td class="entry" valign="top" width="70%" headers="d183214e359 ">An integer that indicates the version of the event record type.</td>

      </tr>

                        <tr>
       <td class="entry" valign="top" width="30%" headers="d183214e356 ">sdc.event.creation_timestamp</td>

       <td class="entry" id="concept_iwg_r2p_my__d33478e2087" valign="top" width="70%" headers="d183214e359 ">Epoch timestamp when the stage created the event.
       </td>

      </tr>

                    </tbody>

                </table>
</div>
</div>

        <div class="p">The Hive Query executor can generate the following types of event records: <dl class="dl">
                
                    <dt class="dt dlterm">Successful query</dt>

                    <dd class="dd">
                        <p class="p">The executor generates a successful query event record when Hive
                            successfully completes the query. </p>

                        <div class="p">A successful query event record has the sdc.event.type record header
                            attribute set to <span class="ph uicontrol">successful-query</span> and includes
                            the following field: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_iwg_r2p_my__table_rfk_mnp_my" class="table" frame="border" border="1" rules="all">
                                    
                                    
                                    <thead class="thead" align="left">
                                        <tr>
                                            <th class="entry" valign="top" width="30%" id="d183214e435">Event Field Name</th>

                                            <th class="entry" valign="top" width="70%" id="d183214e438">Description</th>

                                        </tr>

                                    </thead>

                                    <tbody class="tbody">
                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d183214e435 ">query</td>

                                            <td class="entry" valign="top" width="70%" headers="d183214e438 ">The query that Hive ran successfully.</td>

                                        </tr>

                                    </tbody>

                                </table>
</div>
</div>

                    </dd>

                
                
                    <dt class="dt dlterm">Failed query</dt>

                    <dd class="dd">
                        <p class="p">The executor generates a failed query event record when Hive fails to run
                            the query.</p>

                        <div class="p">A failed query event record has the sdc.event.type record header
                            attribute set to <span class="ph uicontrol">failed-query</span> and can include the
                            following fields: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_iwg_r2p_my__table_vlk_pnp_my" class="table" frame="border" border="1" rules="all">
                                    
                                    
                                    <thead class="thead" align="left">
                                        <tr>
                                            <th class="entry" valign="top" width="30%" id="d183214e486">Event Field Name</th>

                                            <th class="entry" valign="top" width="70%" id="d183214e489">Description</th>

                                        </tr>

                                    </thead>

                                    <tbody class="tbody">
                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d183214e486 ">query</td>

                                            <td class="entry" valign="top" width="70%" headers="d183214e489 ">The query that Hive failed to run. </td>

                                        </tr>

                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d183214e486 ">unexecuted-queries</td>

                                            <td class="entry" valign="top" width="70%" headers="d183214e489 ">Any additional queries that did not execute.
                                                  <p class="p">The event record includes this field only when
                                                  you configure the executor to skip running
                                                  subsequent queries when a query fails.
                                                </p>
</td>

                                        </tr>

                                    </tbody>

                                </table>
</div>
</div>

                    </dd>

                
            </dl>
</div>

 </div>

</div>
</div>
<div class="topic task nested1" id="task_mgm_4lk_fx">
    <h2 class="title topictitle2">Configuring a Hive Query Executor</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure
                a Hive Query executor to execute a query on Hive or Impala when the executor
                receives an event record.</p>

        </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_mgm_4lk_fx__d33460e5671" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d183214e567">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d183214e570">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Stage name.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">Description</td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Optional description.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">Stage Library</td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Library version that you want to use. </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">Produce Events <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_zrl_mhn_lx">
                                            <img class="image" id="task_mgm_4lk_fx__d33460e5726" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Generates event records when events occur. Use for event
                                        handling. <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">
                                            <img class="image" id="task_mgm_4lk_fx__d33460e5732" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">Required Fields <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_dnj_bkm_vq">
                                            <img class="image" id="task_mgm_4lk_fx__d33460e5741" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Fields that must include data for the record to be passed
                                        into the stage. <div class="note tip"><span class="tiptitle">Tip:</span> You might
                                            include fields that the stage uses.</div>
<p class="p">Records
                                            that do not include all required fields are processed
                                            based on the error handling configured for the
                                            pipeline.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">Preconditions <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_msl_yd4_fs">
                                            <img class="image" id="task_mgm_4lk_fx__d33460e5758" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Conditions that must evaluate to TRUE to allow a record
                                        to enter the stage for processing. Click
                                            <span class="ph uicontrol">Add</span> to create additional
                                        preconditions. <p class="p">Records that do not meet all preconditions
                                            are processed based on the error handling configured for
                                            the stage.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e567 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
                                            <img class="image" id="task_mgm_4lk_fx__d33460e5775" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e570 ">Error record handling for the stage: <ul class="ul" id="task_mgm_4lk_fx__d33460e5779">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand" id="task_mgm_4lk_fx__step-Hivetab">
                <span class="ph cmd">On the <span class="ph uicontrol">Hive</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_mgm_4lk_fx__table_olb_4sx_mx" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d183214e708">Hive Property</th>

                                    <th class="entry" valign="top" width="70%" id="d183214e711">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d183214e708 ">JDBC URL</td>

       <td class="entry" valign="top" width="70%" headers="d183214e711 ">JDBC URL for Hive. You can use the default, or replace the expression for the database
        name with a specific database name when appropriate.<p class="p">For more information about specifying
         the URL, see our <a class="xref" href="https://ask.streamsets.com/question/7/how-do-you-configure-a-hive-impala-jdbc-driver-for-data-collector/?answer=8#post-id-8" target="_blank">Ask StreamSets post</a>.</p>
</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e708 ">JDBC Driver Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e711 ">
                                        <p class="p">The fully-qualified JDBC driver name. </p>

                                        <p class="p">Before using an Impala JDBC driver, install the driver as
                                            an external library for the stage library used by the
                                            Hive Query executor. For more information, see <a class="xref" href="HiveQuery.html#concept_rfq_xk4_nbb">Installing the Impala Driver</a>.</p>

                                    </td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d183214e708 ">Hadoop Configuration Directory</td>

       <td class="entry" valign="top" width="70%" headers="d183214e711 ">
        <p class="p">Absolute path to the directory containing the Hive and Hadoop configuration files. For a
         Cloudera Manager installation, enter hive-conf. </p>

        <div class="p">The stage uses the following configuration files: <ul class="ul" id="task_mgm_4lk_fx__ul_tqf_lms_dw">
                  <li class="li">core-site.xml</li>

                  <li class="li">hdfs-site.xml</li>

                  <li class="li">hive-site.xml</li>

            </ul>
</div>

        <div class="note note"><span class="notetitle">Note:</span> Properties in the configuration files are overridden by individual properties defined
         in this stage. </div>

       </td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d183214e708 ">Additional Hadoop Configuration</td>

       <td class="entry" valign="top" width="70%" headers="d183214e711 ">
        <p class="p">Additional properties to use. </p>

        <p class="p">To add properties, click <span class="ph uicontrol">Add</span> and define the property name and
         value. Use the property names and values as expected by HDFS and Hive.</p>

       </td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="ph uicontrol">Query</span> tab, configure the following
                    property:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_mgm_4lk_fx__table_ywf_ztx_mx" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d183214e826">Query Property</th>

                                    <th class="entry" valign="top" width="70%" id="d183214e829">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e826 ">SQL Queries <a class="xref" href="HiveQuery.html#concept_jzl_yrr_mx">
                                            <img class="image" id="task_mgm_4lk_fx__image_rfz_thp_fs" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e829 ">One or more SQL queries to execute on Hive or Impala upon
                                        receiving an event record.<p class="p">Using <a class="xref" href="../Pipeline_Configuration/SimpleBulkEdit.html#concept_alb_b3y_cbb">simple or bulk edit mode</a>, click the
                                                <span class="ph uicontrol">Add</span> icon to add additional
                                            queries.</p>
<p class="p">The executor processes multiple queries
                                            in order, and waits for each query to complete before
                                            continuing to the next query.</p>
<div class="p">To process events
                                            from the Hive Metastore or Hadoop FS destinations when
                                            using the Drift Synchronization Solution for Hive with
                                            Impala, you might use the following query:
                                            <pre class="pre codeblock">invalidate metadata ${record:attribute('/table')}</pre>
</div>
<p class="p">For
                                            more information, see <a class="xref" href="HiveQuery.html#concept_hqg_nzh_vx">Impala Queries for the Drift Synchronization Solution for Hive</a>.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d183214e826 ">Stop on Query Failure</td>

                                    <td class="entry" valign="top" width="70%" headers="d183214e829 ">Skips the remaining queries for an event record when a
                                        query fails. <p class="p">By default, upon a failed query, the
                                            executor continues to run all configured queries for the
                                            event record. </p>
<p class="p">When selected, the executor skips
                                            the remaining queries and starts running queries for the
                                            next event record.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Executors/Executors-title.html" title="Executors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Executors</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"></div>
</body>
</html>