
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="When you upgrade an installation with Cloudera Manager, the new version uses the same configuration, data, log, and resource directories. As a result, the new version has access to the files created ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Upgrade an Installation with Cloudera Manager" /><meta name="DC.Relation" scheme="URI" content="../Upgrade/Upgrade_title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_c45_chv_xv" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Upgrade an Installation with Cloudera Manager</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Upgrade/Upgrade_title.html" title="Upgrade">Upgrade</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Upgrade/Upgrade_title.html" title="Upgrade"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Upgrade</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_c45_chv_xv">
 <h1 class="title topictitle1">Upgrade an Installation with Cloudera Manager</h1>

 <div class="body conbody">
  <p class="p">When you upgrade an installation with Cloudera
            Manager, the new version uses the same configuration, data, log, and resource
            directories. As a result, the new version has access to the files created in the
            previous version.</p>

        <div class="p"><div class="note note"><span class="notetitle">Note:</span> If you installed external libraries or developed custom stages, verify that those
                libraries are stored in a local directory external to the <span class="ph">Data
                  Collector</span> runtime directory before you upgrade. That way, <span class="ph">Data
                  Collector</span> can still use the libraries after the upgrade.</div>
To upgrade <span class="ph">Data
                  Collector</span>
            through Cloudera Manager, perform the following steps:</div>

            <p class="p"><a class="xref" href="CMUpgrade.html#task_q3b_zfc_rx" title="In Data Collector, stop all running pipelines.">Step 1. Stop All Pipelines</a></p>

        <p class="p"><a class="xref" href="CMUpgrade.html#concept_xrh_b11_dbb" title="Before you install the new version, create a backup of the files in the previous version by copying and renaming the configuration, data, and resource directories. That way, you can continue to run the previous version if needed.">Step 2. Back Up the Previous Version</a></p>

            <p class="p"><a class="xref" href="CMUpgrade.html#task_rrx_m3v_xv" title="Install the new StreamSets custom service descriptor file (CSD), and then restart Cloudera Manager.">Step 3. Install the StreamSets Custom Service Descriptor</a></p>

            <p class="p"><a class="xref" href="CMUpgrade.html#task_cgv_2jv_xv" title="You can manually install the StreamSets parcel and related checksum files. Manually install the files when the Cloudera Manager Server does not have internet access.">Step 4. Manually Install the Parcel and Checksum Files (Optional)</a></p>

            <p class="p"><a class="xref" href="CMUpgrade.html#task_mdr_phr_5v" title="After you add the StreamSets repository to Cloudera Manager, you can download and distribute the new StreamSets parcel across the cluster. Stop the StreamSets service and deactivate the previous parcel before you activate the new parcel.">Step 5. Distribute and Activate the New StreamSets Parcel</a></p>

        
        <div class="note warning"><span class="warningtitle">Warning:</span> You must perform the steps in this order, or <span class="ph">Data
                  Collector</span>
            will fail to start.</div>

 </div>

<div class="related-links"></div>
<div class="topic task nested1" id="task_q3b_zfc_rx">
    <h2 class="title topictitle2">Step 1. Stop All Pipelines</h2>

    
    <div class="body taskbody"><p class="shortdesc">In <span class="ph">Data
                  Collector</span>, stop
        all running pipelines.</p>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">From the <span class="ph uicontrol">Home</span> page, select all running pipelines in the
                    list and then click the <span class="ph uicontrol">Stop</span> icon.</span>
                <div class="itemgroup info">The <span class="ph uicontrol">Stop Pipeline Confirmation</span> dialog box
                    appears.</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Yes</span> to stop the pipelines.</span>
            </li>
</ol>

    </div>

</div>
<div class="topic concept nested1" id="concept_xrh_b11_dbb">
 <h2 class="title topictitle2">Step 2. Back Up the Previous Version</h2>

 
 <div class="body conbody"><p class="shortdesc">Before you install the new version, create a backup of the files in the previous version
        by copying and renaming the configuration, data, and resource directories. That way, you can
        continue to run the previous version if needed.</p>

  <p class="p">Copy and rename the following directories on every Cloudera Manager node that runs Data
            Collector:</p>

        <div class="p">
            <ul class="ul">
                <li class="li">SDC_DATA - The <span class="ph">Data
                  Collector</span> directory for pipeline state and configuration information.</li>

                <li class="li">SDC_RESOURCES - The <span class="ph">Data
                  Collector</span> directory for runtime resource files.</li>

            </ul>

        </div>

        <p class="p">For example, if you are upgrading version 2.7.0.0, copy the <span class="ph">Data
                  Collector</span>
            configuration directory and rename it as follows: <samp class="ph codeph">/etc/sdc2700</samp>.</p>

        <p class="p">If you need to roll back to the previous version, you must restore the previous
            directories on every Cloudera Manager node that runs <span class="ph">Data
                  Collector</span>.</p>

 </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Configuration/DCEnvironmentConfig.html#concept_rng_qym_qr" title="You can edit the Data Collector environment configuration file to modify the directories used to store configuration, data, log, and resource files.When you run Data Collector as a service, Data Collector runs as the system user account and group defined in environment variables. The default system user and group are named sdc.Increase or decrease the Data Collector Java heap size as necessary, based on the resources available on the host machine. By default, the Java heap size is 1024 MB. You can enable remote debugging to debug a Data Collector instance running on a remote machine. You can define the Java garbage collector that Data Collector uses. By default, Data Collector uses the Concurrent Mark Sweep (CMS) garbage collector.Data Collector includes a Java Security Manager that is enabled by default. You can edit the Data Collector environment configuration file to configure the path to JAR files to be added to the Data Collector root classloader.">Data Collector Environment Configuration</a></div>
</div>
</div>
</div>
<div class="topic task nested1" id="task_rrx_m3v_xv">
    <h2 class="title topictitle2">Step 3. Install the StreamSets Custom Service Descriptor</h2>

    
    <div class="body taskbody"><p class="shortdesc">Install the new StreamSets custom service descriptor file (CSD), and then restart
        Cloudera Manager.</p>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Use the following URL to download the CSD from the StreamSets website: <a class="xref" href="https://streamsets.com/opensource" target="_blank">https://streamsets.com/opensource</a>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Remove the previous StreamSets CSD file from Cloudera Manager.</span>
                <div class="itemgroup info">For
                    example:<pre class="pre codeblock">rm -f /opt/cloudera/csd/STREAMSETS*.jar</pre>
</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Copy the <span class="ph">Data
                  Collector</span> CSD file to the<span class="ph uicontrol"> Local Descriptor Repository Path</span>. By
                    default, the path is <samp class="ph codeph">/opt/cloudera/csd</samp>.</span>
                <div class="itemgroup info">To verify the path to use, in Cloudera Manager, click <span class="ph menucascade"><span class="ph uicontrol">Administration</span> &gt; <span class="ph uicontrol">Settings</span></span>. In the navigation panel, select the <span class="ph uicontrol">Custom Service
                        Descriptors</span> category. Place the CSD file in the path configured
                    for <span class="ph uicontrol">Local Descriptor Repository Path</span>. </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Set the file ownership to <samp class="ph codeph">cloudera-scm:cloudera-scm</samp> with
                    permission <span class="ph uicontrol">644</span>. </span>
                <div class="itemgroup info">For example:
                    <pre class="pre codeblock">chown cloudera-scm:cloudera-scm /opt/cloudera/csd/STREAMSETS*.jar
chmod 644 /opt/cloudera/csd/STREAMSETS*.jar</pre>
</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Use one of the following commands to restart Cloudera Manager Server:</span>
                <div class="itemgroup info"><div class="p">For Ubuntu 14.04, CentOS 6, or Red Hat Enterprise Linux 6:
                        <pre class="pre codeblock">service cloudera-scm-server restart</pre>
</div>
For Ubuntu
                    16.04, CentOS 7, or Red Hat Enterprise Linux 7:
                    <pre class="pre codeblock">systemctl restart cloudera-scm-server</pre>
</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">In Cloudera Manager, to restart the Cloudera Management Service, click <span class="ph menucascade"><span class="ph uicontrol">Home</span> &gt; <span class="ph uicontrol">Status</span></span>. To the right of Cloudera Management Service, click the
                        <span class="ph uicontrol">Menu</span> icon and select
                    <span class="ph uicontrol">Restart</span>.</span>
            </li>
</ol>

    </div>

</div>
<div class="topic task nested1" id="task_cgv_2jv_xv">
    <h2 class="title topictitle2">Step 4. Manually Install the Parcel and Checksum Files (Optional)</h2>

    
    <div class="body taskbody"><p class="shortdesc">You can manually install the StreamSets parcel and related checksum files. Manually
        install the files when the Cloudera Manager Server does not have internet
        access.</p>

        <div class="section context">
            <p class="p">When working with multiple clusters, perform the following steps for each
                cluster.</p>

        </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Download the StreamSets parcel and related checksum file for the Cloudera
                    Manager Server operating system from the following location:</span>
                <div class="itemgroup info"><a class="xref" href="https://archives.streamsets.com/index.html" target="_blank">https://archives.streamsets.com/index.html</a></div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Copy the StreamSets parcel and checksum files to the <span class="ph uicontrol">Cloudera
                        Manager Local Parcel Repository Path</span>. </span>
                <div class="itemgroup info">By default, the path is <samp class="ph codeph">/opt/cloudera/parcel-repo</samp>.</div>
                <div class="itemgroup info">To verify the path to use, click <span class="ph menucascade"><span class="ph uicontrol">Administration</span> &gt; <span class="ph uicontrol">Settings</span></span>. In the navigation panel, select the
                        <span class="ph uicontrol">Parcels</span> category. Place the StreamSets parcel file in
                    the path configured for <span class="ph uicontrol">Local Parcel Repository Path</span>.
                </div>
            </li>
</ol>

    </div>

</div>
<div class="topic task nested1" id="task_mdr_phr_5v">
    <h2 class="title topictitle2">Step 5. Distribute and Activate the New StreamSets Parcel</h2>

    
    <div class="body taskbody"><p class="shortdesc">After you add the StreamSets repository to Cloudera Manager, you can download and
        distribute the new StreamSets parcel across the cluster. Stop the StreamSets service and
        deactivate the previous parcel before you activate the new parcel.</p>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">To view the list of available parcels, in the menu bar, click the
                        <span class="ph uicontrol">Parcels</span> icon.</span>
                <div class="itemgroup info">
                    <p class="p">The new StreamSets parcel displays in the list of available parcels. If it
                        doesn't display, click <span class="ph uicontrol">Check for New Parcels</span>.</p>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To download the new StreamSets parcel to the local repository, click
                        <span class="ph uicontrol">Download</span>.</span>
                <div class="itemgroup info">
                    <p class="p">After the parcel is downloaded, the Download button becomes the Distribute
                        button.</p>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To distribute the new StreamSets parcel to the cluster, click
                        <span class="ph uicontrol">Distribute</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To stop the StreamSets service, click <span class="ph menucascade"><span class="ph uicontrol">Clusters</span> &gt; <span class="ph uicontrol">StreamSets</span></span> and then click <span class="ph menucascade"><span class="ph uicontrol">Actions</span> &gt; <span class="ph uicontrol">Stop</span></span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click the <span class="ph uicontrol">Parcels</span> icon to return to the Parcels
                    page.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To deactivate the previous StreamSets parcel, choose the appropriate cluster in
                    the Location selector, and then click <span class="ph uicontrol">Deactivate</span> for the
                    parcel.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To activate the new StreamSets parcel, choose the appropriate cluster in the
                    Location selector, and then click <span class="ph uicontrol">Activate</span> for the
                    parcel.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To restart the StreamSets service, click <span class="ph menucascade"><span class="ph uicontrol">Clusters</span> &gt; <span class="ph uicontrol">StreamSets</span></span> and then click <span class="ph menucascade"><span class="ph uicontrol">Actions</span> &gt; <span class="ph uicontrol">Start</span></span>.</span>
                <div class="itemgroup info"> When you restart the StreamSets service, Cloudera Manager updates the <span class="ph">Data
                  Collector</span> configuration properties for you. Cloudera Manager retains any customized
                    values that you added in the previous <span class="ph">Data
                  Collector</span> version. It also adds any new properties included in the new <span class="ph">Data
                  Collector</span> version. </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Upgrade/Upgrade_title.html" title="Upgrade"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Upgrade</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"></div>
</body>
</html>