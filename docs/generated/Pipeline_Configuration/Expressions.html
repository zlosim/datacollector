
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="Use the expression language to configure expressions and conditions in processors, such as the Expression Evaluator or Stream Selector. Some destination properties also require the expression ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Expression Configuration" /><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/PipelineConfiguration_title.html" /><meta name="DC.Relation" scheme="URI" content="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" /><meta name="DC.Relation" scheme="URI" content="RuntimeValues.html#concept_rjh_ntz_qr" /><meta name="DC.Relation" scheme="URI" content="RuntimeValues.html#concept_fjx_g31_1s" /><meta name="DC.Relation" scheme="URI" content="RuntimeValues.html#concept_bs4_5nm_2s" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_ofb_1cm_xq" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Expression Configuration</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration">Pipeline Configuration</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_ofb_1cm_xq">
 <h1 class="title topictitle1">Expression Configuration</h1>

 <div class="body conbody">
    <p class="p">Use the expression language to configure expressions and conditions in
                  processors, such as the Expression Evaluator or Stream Selector. Some destination
                  properties also require the expression language, such as the directory template
                  for Hadoop FS or Local FS. </p>
<p class="p">Optionally, you can use the expression language to define any stage or
                  pipeline property that represents a numeric or string value. This allows you to
                  use runtime parameters or runtime properties throughout the pipeline. You can use
                  expression completion to determine where you can use an expression and the
                  expression elements that you can use in that location. </p>
<div class="p">You can use the following elements in an expression:<ul class="ul" id="concept_ofb_1cm_xq__d75846e3393">
                        <li class="li">Constants</li>

                        <li class="li">Datetime variables</li>

                        <li class="li">Field names</li>

                        <li class="li">Functions</li>

                        <li class="li">Literals</li>

                        <li class="li">Operators</li>

                        <li class="li">Runtime parameters</li>

                        <li class="li">Runtime properties</li>

                        <li class="li">Runtime resources</li>

                  </ul>
</div>

 </div>

  <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="Expression Language">Expression Language</a></div>
<div class="related_link"><a class="navheader_parent_path" href="RuntimeValues.html#concept_rjh_ntz_qr" title="Runtime parameters are parameters that you define in a pipeline and then call from within that same pipeline. When you start the pipeline, you specify the parameter values to use. Use runtime parameters to specify values for pipeline properties when you start the pipeline.">Using Runtime Parameters</a></div>
<div class="related_link"><a class="navheader_parent_path" href="RuntimeValues.html#concept_fjx_g31_1s" title="Runtime properties are properties that you define in a file local to the Data Collector and call from within a pipeline. With runtime properties, you can define different sets of values for different Data Collectors.">Using Runtime Properties</a></div>
<div class="related_link"><a class="navheader_parent_path" href="RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">Using Runtime Resources</a></div>
</div>
</div>
<div class="topic concept nested1" id="concept_bkb_tcm_xq">
 <h2 class="title topictitle2">Basic Syntax</h2>

 
 <div class="body conbody"><p class="shortdesc">Precede all expressions with a dollar sign and enclose them with curly brackets, as
  follows: <samp class="ph codeph">${&lt;expression&gt;}</samp>.</p>

  <p class="p">For example, to add 2
   + 2, use the following syntax: ${2 + 2}.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_kk2_mbm_xq">
 <h2 class="title topictitle2">Using Field Names in Expressions</h2>

 <div class="body conbody">
  <p class="p">When a pipeline is valid for preview,
   expression completion provides available field names in a list. When a list is not available, use
   the appropriate format for the field name.</p>

  <div class="p">When you use a field name in an expression, use the following
   syntax:<pre class="pre codeblock">${record:value("/&lt;field name&gt;")}</pre>
</div>

  <div class="p">
   <div class="note note"><span class="notetitle">Note:</span> You can use single or double quotation marks to surround a field name.</div>

  </div>

  <p class="p">For example, the following expressions both concatenate the values from the DATE field with
   values from the TIME field:</p>

  <div class="p">
   <pre class="pre codeblock">${record:value('/DATE')} ${record:value('/TIME')}
${record:value("/DATE")} ${record:value("/TIME")}</pre>

  </div>

 </div>

<div class="topic concept nested2" id="concept_xnp_453_ft">
 <h3 class="title topictitle3">Field Names with Special Characters</h3>

 
 <div class="body conbody"><p class="shortdesc">You can use quotation marks and the backslash character to handle special characters in
  field names. </p>

  <div class="p">Expression completion provides the correct syntax for field
   names with special characters. But when you need to enter the field names manually, be sure to
   use the following guidelines:<dl class="dl">
    
     <dt class="dt dlterm">Use quotation marks around field names with special characters</dt>

     <dd class="dd">When a field name includes special characters, surround the field name with single or
      double quotation marks as follows: <pre class="pre codeblock">/"&lt;field w/specialcharacter&gt;"</pre>
Some
      examples:<pre class="pre codeblock">/"Stream$ets"
/'city&amp;state'
/"product names"</pre>
</dd>

    
    
     <dt class="dt dlterm">When using multiple sets of quotation marks, alternate between types as you go</dt>

     <dd class="dd">Throughout the expression language, when using quotation marks, you can use single or
      double quotation marks. But make sure to alternate between the types when nesting quotation
      marks. </dd>

     <dd class="dd">For example: </dd>

     <dd class="dd">
      <pre class="pre codeblock">${record:value('/"Stream$ets"'}
${record:value("/'city&amp;state'"}</pre>

     </dd>

    
    
     <dt class="dt dlterm">Use a backslash as an escape character</dt>

     <dd class="dd">To use a quotation mark or backslash in a field name, use a backslash ( \ ).</dd>

     <dd class="dd">Add additional backslashes as necessary to escape quotation marks. </dd>

     <dd class="dd">For example, to use a field named "ID's" as a required field, you would use a single
      backslash: <pre class="pre codeblock">/ID\'s</pre>
</dd>

     <dd class="dd">To use the same field in an expression, you might need additional backslashes as
      follows:<pre class="pre codeblock">${record:value('/ID\\'s')}</pre>
</dd>

    
   </dl>
</div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_hjk_b4l_vq">
 <h2 class="title topictitle2">Referencing Field Names and Field Paths</h2>

 
 <div class="body conbody"><p class="shortdesc">When a pipeline is valid for preview, you can generally select fields from a list. When
                a list is not available or when you are defining a new field name, you need to use
                the appropriate format for the field name.  </p>

    <p class="p">To
                        reference a field, you specify the path of the field. A field path describes
                        a data element in a record using a syntax similar to files in directories.
                        The complexity of a field path differs based on the type of data in the
                        record:</p>

                <div class="p">
                        <dl class="dl">
                                
                                        <dt class="dt dlterm">Simple maps or JSON objects</dt>

                                        <dd class="dd">
                                                <div class="p">With simple maps or JSON objects, the fields are
                                                  one level removed from the root. Reference the
                                                  field as
                                                  follows:<pre class="pre codeblock">/&lt;field name&gt;</pre>
</div>

                                                <div class="p">So, to reference a CITY field in a simple JSON
                                                  object, enter <samp class="ph codeph">/CITY</samp>. A simple
                                                  expression that calls the field might look like
                                                  this:<pre class="pre codeblock">${record:value('/CITY')}</pre>
</div>

                                        </dd>

                                
                                
                                        <dt class="dt dlterm">Complex maps or JSON objects</dt>

                                        <dd class="dd">
                                                <div class="p">To reference a field in a complex map or JSON
                                                  object, include the path to the field, as follows:
                                                  <pre class="pre codeblock">/&lt;path to field&gt;/&lt;field name&gt;</pre>
</div>

                                                <div class="p">For example, the following field path describes
                                                  an employeeName field several levels deep in a
                                                  JSON object:
                                                  <samp class="ph codeph">/region/division/group/employeeName</samp>.
                                                  An expression that calls the field might look like
                                                  this:<pre class="pre codeblock">${record:value("/region/division/group/employeeName")}</pre>
</div>

                                        </dd>

                                
                                
                                        <dt class="dt dlterm">Arrays or lists</dt>

                                        <dd class="dd">To reference a field in an array or list, include the
                                                index and path to the field, as
                                                follows:<pre class="pre codeblock">[&lt;index value&gt;]/&lt;path to field&gt;/&lt;field name&gt;</pre>
</dd>

                                        <dd class="dd">For example, the following field path describes the same
                                                employeeName field in the third region index in an
                                                array:
                                                <samp class="ph codeph">[2]/east/HR/employeeName</samp>.</dd>

                                        <dd class="dd">An expression that calls the field might look like
                                                this:<pre class="pre codeblock">${record:value('[2]/east/HR/employeeName')}</pre>
</dd>

                                        <dd class="dd">Delimited records can be structured as lists. For more
                                                information, see <a class="xref" href="../Data_Formats/DelimitedDataRootFieldTypes.html#concept_zcg_bm4_fs">Delimited Data Root Field Type</a>.</dd>

                                
                                
                                        <dt class="dt dlterm">Text</dt>

                                        <dd class="dd">To reference text when a record is a line of text, use
                                                the following field name:
                                                <pre class="pre codeblock">/text</pre>
</dd>

                                
                        </dl>

                </div>

 </div>

<div class="topic concept nested2" id="concept_vqr_sqc_wr">
  <h3 class="title topictitle3">Wildcard Use for Arrays and Maps</h3>

  
  <div class="body conbody"><p class="shortdesc">In some processors, you can use the asterisk wildcard (*) as indices in an array or key
    values in a map. Use a wildcard to help define the field paths for maps and arrays. </p>

    <div class="p">You can use the asterisk wildcard as follows: <dl class="dl">
        
          <dt class="dt dlterm">[*]</dt>

          <dd class="dd">Matches all values for the specified index in an array. For example, the following
            field path represents the social security number of every employee in every
            division:<pre class="pre codeblock">/Division[*]/Employee[*]/SSN</pre>
</dd>

        
        
          <dt class="dt dlterm">/*</dt>

          <dd class="dd">Matches all values for the specified keys in a map. For example, the following field
            path represents all employee information in the first
            division:<pre class="pre codeblock">/Division[0]/Employee[*]/*</pre>
</dd>

        
      </dl>
</div>

  </div>

</div>
</div>
<div class="topic concept nested1" id="concept_tns_krz_sr">
 <h2 class="title topictitle2">Expression Completion in Properties</h2>

 <div class="body conbody">
    <p class="p">Expression completion
            provides a list of data types, runtime parameters, fields, and functions that you can
            use. The list includes runtime parameters when defined, and available fields when the
            pipeline is valid for data preview.</p>

    <p class="p">When an element does not display in the list, it is not a valid element at the specified
      location.</p>

  </div>

<div class="topic concept nested2" id="concept_fwj_yq5_tr">
 <h3 class="title topictitle3">Tips for Expression Completion</h3>

 
 <div class="body conbody"><p class="shortdesc">Use the following information and tips when you invoke expression
  completion:</p>

  <div class="p">
   <ol class="ol" id="concept_fwj_yq5_tr__ol_sls_br5_tr">
        <li class="li">To invoke
          expression completion, place the cursor where you want to create an expression and click
            <span class="ph uicontrol">Ctrl + Space Bar</span>.<p class="p">A list of valid expression elements displays.
            Scroll to view the entire list.</p>
<p class="p"><img class="image" id="concept_fwj_yq5_tr__image_ctc_rs5_tr" src="../Graphics/ExComp-List.png" /></p>
<p class="p">You can invoke expression completion anywhere where you
            can use an expression.</p>
</li>

    <li class="li">Field names display at the top of the list when data preview is available. When defined,
          runtime parameters display in the list with a purple Parameters icon.<p class="p">In the following
            example, DirectoryRoot is a runtime parameter:</p>
<p class="p"><img class="image" id="concept_fwj_yq5_tr__image_cvp_sdv_tr" src="../Graphics/ExComp-FieldsConstants.png" height="270" width="355" /></p>
</li>

    <li class="li">To view more information about an element, click the element name: <p class="p"><img class="image" id="concept_fwj_yq5_tr__image_m2v_ht5_tr" src="../Graphics/ExComp-ListInfo.png" /></p>
</li>

    <li class="li">To add an element to an expression, double-click the element name or hit
            <span class="ph uicontrol">Enter</span>. </li>

        <li class="li">You can filter the element list by typing the first few letters of the element name. </li>

    <li class="li">To view the syntax of a function, after you add the function, click within the parentheses.
       <p class="p"><img class="image" id="concept_fwj_yq5_tr__image_jq3_yw5_tr" src="../Graphics/ExComp-Syntax.png" /></p>
</li>

   </ol>

  </div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_fmr_ggh_fr">
 <h2 class="title topictitle2">Data Type Coercion</h2>

 
 <div class="body conbody"><p class="shortdesc">When an expression requires, the expression language attempts implicit data type
  conversion - a.k.a. data type coercion. When coercion is not possible, <span class="ph">Data
                  Collector</span> passes the
  error records to the stage for error handling.</p>

  <p class="p">For example, you have an Expression Evaluator stage configured to send error records to the
   pipeline for error handling, and the pipeline writes error records to a file.  The Expression
   Evaluator includes an expression that treats string data as integers. When the field includes
   integer or valid numeric data, the expression language coerces the data type. If the field
   includes a date, that record is written to the error records file.</p>

  <p class="p">To avoid coercion errors, you can use the Field Type Converter earlier in the pipeline to
   convert data to the appropriate data type.</p>

 </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"></div>
</body>
</html>