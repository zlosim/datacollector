
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="MapR Prerequisites" /><meta name="abstract" content="Due to licensing restrictions, StreamSets cannot distribute MapR libraries with Data Collector. As a result, you must perform additional steps to enable the Data Collector machine to connect to MapR. Data Collector does not display MapR origins and destinations in the stage library nor the MapR Streams statistics aggregator in the pipeline properties until you perform these prerequisites." /><meta name="description" content="Due to licensing restrictions, StreamSets cannot distribute MapR libraries with Data Collector. As a result, you must perform additional steps to enable the Data Collector machine to connect to MapR. Data Collector does not display MapR origins and destinations in the stage library nor the MapR Streams statistics aggregator in the pipeline properties until you perform these prerequisites." /><meta name="DC.Relation" scheme="URI" content="../Installation/Install_title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_jgs_qpg_2v" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>MapR Prerequisites</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Installation/Install_title.html" title="Installation">Installation</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Installation/Install_title.html" title="Installation"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_jgs_qpg_2v">
 <h1 class="title topictitle1">MapR Prerequisites</h1>

    
 <div class="body conbody"><p class="shortdesc">Due to licensing restrictions, StreamSets cannot distribute MapR libraries with <span class="ph">Data
                  Collector</span>. As a
        result, you must perform additional steps to enable the <span class="ph">Data
                  Collector</span>
        machine to connect to MapR. <span class="ph">Data
                  Collector</span> does
        not display MapR origins and destinations in the stage library nor the MapR Streams
        statistics aggregator in the pipeline properties until you perform these
        prerequisites.</p>

        <p class="p">MapR prerequisites include
            installing the required client libraries and then running the command to set up MapR. To
            connect to a secure MapR cluster enabled for wire-level security and username/password
            authentication, you also must configure <span class="ph">Data
                  Collector</span> to
            run as the user account that is granted access to the cluster in the MapR user or
            service ticket. </p>

    </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_wcb_lxp_xz">
    <h2 class="title topictitle2">Step 1. Install Client Libraries</h2>

    <div class="body conbody">
        <p class="p">Install the required client libraries. If the MapR cluster uses username/password login
            authentication, you must enable <span class="ph">Data
                  Collector</span> to
            use username/password authentication.</p>

        <ol class="ol" id="concept_wcb_lxp_xz__ol_ir2_4xp_xz">
            <li class="li">Install <span class="ph">Data
                  Collector</span> on a node in the MapR cluster or on a client machine.<div class="p">To run <span class="ph">Data
                  Collector</span> on a client machine - outside the cluster or on your local machine - the MapR
                    client package must be installed and configured on the machine. If the MapR
                    client package is not installed on the machine, download and install the
                    following files:<ul class="ul" id="concept_wcb_lxp_xz__ul_qcz_x1m_gv">
                        <li class="li">MapR client library - Typically named
                                <samp class="ph codeph">mapr-client_&lt;version&gt;.&lt;ext&gt;</samp>.<div class="p">You can
                                download the files for your operating system
                                here:<pre class="pre codeblock"><a class="xref" href="http://package.mapr.com/releases/" target="_blank">http://package.mapr.com/releases/</a>&lt;version&gt;/</pre>
</div>
</li>

                        <li class="li">Kafka client library - Typically named
                                <samp class="ph codeph">mapr-kafka-&lt;version&gt;.&lt;ext&gt;</samp>. <div class="p">For MapR
                                versions 5.0.0 or 5.1.0, you can download the files for your
                                operating system here:
                                <pre class="pre codeblock"><a class="xref" href="http://package.mapr.com/releases/" target="_blank">http://package.mapr.com/releases/</a>ecosystem-&lt;version&gt;/</pre>
For
                                MapR version 5.2.0, you can download the files for your operating
                                system here:
                                <pre class="pre codeblock"><a class="xref" href="http://package.mapr.com/releases/MEP/" target="_blank">http://package.mapr.com/releases/MEP/</a>MEP-&lt;version&gt;/</pre>
</div>
</li>

                    </ul>
</div>
</li>

            <li class="li">If the MapR cluster uses username/password login
                    authentication, uncomment the following line in the <span class="ph">Data
                  Collector</span> environment
                    configuration file located in the <samp class="ph codeph">$SDC_DIST/libexec</samp> directory:
                        <pre class="pre codeblock">#export SDC_JAVA_OPTS="-Dmaprlogin.password.enabled=true"</pre>
<p class="p">Modify
                        the <a class="xref" href="../Configuration/DCEnvironmentConfig.html#concept_rng_qym_qr" title="You can edit the Data Collector environment configuration file to modify the directories used to store configuration, data, log, and resource files.When you run Data Collector as a service, Data Collector runs as the system user account and group defined in environment variables. The default system user and group are named sdc.Increase or decrease the Data Collector Java heap size as necessary, based on the resources available on the host machine. By default, the Java heap size is 1024 MB. You can enable remote debugging to debug a Data Collector instance running on a remote machine. You can define the Java garbage collector that Data Collector uses. By default, Data Collector uses the Concurrent Mark Sweep (CMS) garbage collector.Data Collector includes a Java Security Manager that is enabled by default. You can edit the Data Collector environment configuration file to configure the path to JAR files to be added to the Data Collector root classloader.">environment configuration file</a> used by your installation
                        type.</p>
</li>

        </ol>

    </div>

</div>
<div class="topic concept nested1" id="concept_pvx_wxp_xz">
 <h2 class="title topictitle2">Step 2. Run the Command to Set Up MapR</h2>

 
    <div class="body conbody"><p class="shortdesc">After installing the required client libraries, run the <samp class="ph codeph">setup-mapr</samp>
        command. The command modifies configuration files, creates the required symbolic links, and
        installs the appropriate MapR stage libraries. You can run the command in interactive or
        non-interactive mode. </p>

        <p class="p"> In interactive mode, the command prompts you for the MapR version and home directory. In
            non-interactive mode, you define the MapR version and home directory in environment
            variables before running the command. </p>

        <p class="p">In either mode, the command checks if the MapR distribution of Spark is installed in the
            specified MapR cluster. If a supported version is installed, the command also installs
            the MapR Spark stage library for you.</p>

    </div>

<div class="topic concept nested2" id="concept_sfq_jyp_xz">
    <h3 class="title topictitle3">Running the Command in Interactive Mode</h3>

    
    <div class="body conbody"><p class="shortdesc">When you run the setup-mapr command in interactive mode, the command prompts you for
        the MapR version and home directory. </p>

        <ol class="ol" id="concept_sfq_jyp_xz__ol_j34_myp_xz">
            <li class="li">Set the following environment variables:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_sfq_jyp_xz__table_vg1_pyp_xz" class="table" frame="border" border="1" rules="all">
                        
                        
                        <thead class="thead" align="left">
                            <tr>
                                <th class="entry" valign="top" width="30%" id="d218050e215">Environment Variable</th>

                                <th class="entry" valign="top" width="70%" id="d218050e218">Description</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr>
                        <td class="entry" valign="top" width="30%" headers="d218050e215 ">SDC_HOME</td>

                        <td class="entry" valign="top" width="70%" headers="d218050e218 "><span class="ph">Data
                  Collector</span>
                            home directory.<div class="p">
                                <div class="note note"><span class="notetitle">Note:</span> The default home directory for an RPM installation is
                                        <samp class="ph codeph">/opt/streamsets-datacollector</samp>. The tarball
                                    home directory is the location where you extracted the
                                    file.</div>

                            </div>
</td>

                    </tr>

                            <tr>
                        <td class="entry" valign="top" width="30%" headers="d218050e215 ">SDC_CONF</td>

                        <td class="entry" valign="top" width="70%" headers="d218050e218 "><span class="ph">Data
                  Collector</span>
                            configuration directory.</td>

                    </tr>

                        </tbody>

                    </table>
</div>
<div class="p">Use the following command to set an environment
                    variable:<pre class="pre codeblock">export &lt;environment variable&gt;=&lt;value&gt;</pre>
</div>
For
                example, use the following commands if you used the default home and configuration
                directories for an RPM
                installation:<pre class="pre codeblock">export SDC_HOME=/opt/streamsets-datacollector
export SDC_CONF=/etc/sdc</pre>
</li>

            <li class="li">Use the following command to set up
                MapR:<pre class="pre codeblock">$SDC_HOME/bin/streamsets setup-mapr</pre>
</li>

            <li class="li">When prompted, enter 5.0.0, 5.1.0, or 5.2.0 for the MapR version.</li>

            <li class="li" id="concept_sfq_jyp_xz__MapR_absolutepath">When prompted, enter the absolute path to the MapR home
                directory, usually <samp class="ph codeph">/opt/mapr</samp>.</li>

            <li class="li">Restart <span class="ph">Data
                  Collector</span> and
                verify that the MapR origins and destinations appear in the stage library.</li>

        </ol>

    </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Configuration/DCEnvironmentConfig.html#concept_rng_qym_qr" title="You can edit the Data Collector environment configuration file to modify the directories used to store configuration, data, log, and resource files.When you run Data Collector as a service, Data Collector runs as the system user account and group defined in environment variables. The default system user and group are named sdc.Increase or decrease the Data Collector Java heap size as necessary, based on the resources available on the host machine. By default, the Java heap size is 1024 MB. You can enable remote debugging to debug a Data Collector instance running on a remote machine. You can define the Java garbage collector that Data Collector uses. By default, Data Collector uses the Concurrent Mark Sweep (CMS) garbage collector.Data Collector includes a Java Security Manager that is enabled by default. You can edit the Data Collector environment configuration file to configure the path to JAR files to be added to the Data Collector root classloader.">Data Collector Environment Configuration</a></div>
</div>
</div>
</div>
<div class="topic concept nested2" id="concept_umx_15q_xz">
    <h3 class="title topictitle3">Running the Command in Non-Interactive Mode</h3>

    
    <div class="body conbody"><p class="shortdesc">When you run the setup-mapr command in non-interactive mode, you define the MapR
        version and home directory in environment variables before running the command. </p>

        <div class="p">
            <ol class="ol">
                <li class="li">Set the following environment variables:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_umx_15q_xz__table_vg1_pyp_xz" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d218050e361">Environment Variable</th>

                                    <th class="entry" valign="top" width="70%" id="d218050e364">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                        <td class="entry" valign="top" width="30%" headers="d218050e361 ">SDC_HOME</td>

                        <td class="entry" valign="top" width="70%" headers="d218050e364 "><span class="ph">Data
                  Collector</span>
                            home directory.<div class="p">
                                <div class="note note"><span class="notetitle">Note:</span> The default home directory for an RPM installation is
                                        <samp class="ph codeph">/opt/streamsets-datacollector</samp>. The tarball
                                    home directory is the location where you extracted the
                                    file.</div>

                            </div>
</td>

                    </tr>
<tr>
                        <td class="entry" valign="top" width="30%" headers="d218050e361 ">SDC_CONF</td>

                        <td class="entry" valign="top" width="70%" headers="d218050e364 "><span class="ph">Data
                  Collector</span>
                            configuration directory.</td>

                    </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d218050e361 ">MAPR_HOME</td>

                                    <td class="entry" valign="top" width="70%" headers="d218050e364 ">MapR home directory, usually /opt/mapr.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d218050e361 ">MAPR_VERSION</td>

                                    <td class="entry" valign="top" width="70%" headers="d218050e364 ">MapR version: 5.0.0, 5.1.0, or 5.2.0.</td>

                                </tr>

                            </tbody>

                        </table>
</div>
<div class="p">Use the following command to set an environment
                        variable:<pre class="pre codeblock">export &lt;environment variable&gt;=&lt;value&gt;</pre>
For
                        example, use the following commands if you used the default home and
                        configuration directories for an RPM installation, the default MapR home
                        directory, and MapR version
                        5.2.0:<pre class="pre codeblock">export SDC_HOME=/opt/streamsets-datacollector
export SDC_CONF=/etc/sdc
export MAPR_HOME=/opt/mapr
export MAPR_VERSION=5.2.0</pre>
</div>
</li>

                <li class="li">Use the following command to set up
                MapR:<pre class="pre codeblock">$SDC_HOME/bin/streamsets setup-mapr</pre>
</li>

                <li class="li">Restart <span class="ph">Data
                  Collector</span> and
                verify that the MapR origins and destinations appear in the stage library.</li>

            </ol>

        </div>

    </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Configuration/DCEnvironmentConfig.html#concept_rng_qym_qr" title="You can edit the Data Collector environment configuration file to modify the directories used to store configuration, data, log, and resource files.When you run Data Collector as a service, Data Collector runs as the system user account and group defined in environment variables. The default system user and group are named sdc.Increase or decrease the Data Collector Java heap size as necessary, based on the resources available on the host machine. By default, the Java heap size is 1024 MB. You can enable remote debugging to debug a Data Collector instance running on a remote machine. You can define the Java garbage collector that Data Collector uses. By default, Data Collector uses the Concurrent Mark Sweep (CMS) garbage collector.Data Collector includes a Java Security Manager that is enabled by default. You can edit the Data Collector environment configuration file to configure the path to JAR files to be added to the Data Collector root classloader.">Data Collector Environment Configuration</a></div>
</div>
</div>
</div>
</div>
<div class="topic concept nested1" id="concept_kpp_4zp_fbb">
 <h2 class="title topictitle2">Step 3. Connect to a Secure MapR Cluster</h2>

 
 <div class="body conbody"><p class="shortdesc">To connect to a secure MapR cluster enabled for wire-level security and
        username/password authentication, you must configure <span class="ph">Data
                  Collector</span> to run
        as the user account granted access to the cluster in the MapR user or service ticket. </p>

        <p class="p">A secure MapR cluster implements authentication with the following types of tickets: </p>

        <dl class="dl">
            
                <dt class="dt dlterm">User tickets</dt>

                <dd class="dd">Each user account uses a generated user ticket to authenticate with the cluster.
                    To run MapR commands in the cluster, <span class="ph">Data
                  Collector</span> can run as a user account granted access in a MapR user ticket. For example,
                    if a user ticket is generated for the "myuser" user account, then configure <span class="ph">Data
                  Collector</span> to run as the "myuser" user account.</dd>

            
            
                <dt class="dt dlterm">Service tickets</dt>

                <dd class="dd">Applications that run outside of the MapR cluster - such as <span class="ph">Data
                  Collector</span> - can use service tickets to authenticate with the cluster. To run MapR
                    commands in the cluster, <span class="ph">Data
                  Collector</span> can run as the user account granted access in the MapR service ticket.</dd>

                <dd class="dd">
                    <div class="p">For example, let's say that you ran the following MapR command to generate
                        the service ticket for applications running outside of the
                        cluster:<pre class="pre codeblock">maprlogin generateticket -type service -out /tmp/longlived_ticket -duration 30:0:0 -renewal 90:0:0
MapR credentials of user 'myappuser' for cluster 'mycluster' are written to '/tmp/longlived_ticket'</pre>
</div>

                    <p class="p">You then configure <span class="ph">Data
                  Collector</span> to run as the "myappuser" user account.</p>

                </dd>

            
        </dl>

        <p class="p">For more information about MapR user and service tickets, see the <a class="xref" href="https://maprdocs.mapr.com/home/SecurityGuide/Tickets.html" target="_blank">MapR documentation</a>.</p>

        <p class="p">Configure <span class="ph">Data
                  Collector</span> to
            run as the required user account based on your installation type:</p>

        <div class="p">
            <dl class="dl">
                
                    <dt class="dt dlterm">Tarball (manual start)</dt>

                    <dd class="dd">When <span class="ph">Data
                  Collector</span> is installed from the tarball and started manually, <span class="ph">Data
                  Collector</span> runs as the system user account logged into the command prompt when you
                        use the following launch
                        command:<pre class="pre codeblock">$SDC_DIST/bin/streamsets dc</pre>
To connect to a
                        secure MapR cluster enabled for wire-level security and username/password
                        authentication, you can log into the command prompt as the user account
                        granted access in the MapR user or service ticket. Or, you can impersonate
                        the required user account by using the following launch command, where
                        &lt;user&gt; is the user account granted access in the MapR user or service
                            ticket:<pre class="pre codeblock">sudo -u &lt;user&gt; $SDC_DIST/bin/streamsets dc</pre>
<div class="p">For
                            example:<pre class="pre codeblock">sudo -u myappuser /opt/streamsets-datacollector-<span class="ph">3.0.0.0</span>/bin/streamsets dc</pre>
</div>
</dd>

                
                
                    <dt class="dt dlterm">RPM package or tarball (service start)</dt>

                    <dd class="dd">When <span class="ph">Data
                  Collector</span> is installed from the RPM package or from the tarball and started as a
                        service, <span class="ph">Data
                  Collector</span> runs as the system user account and group defined in environment
                        variables. The default system user and group are named sdc.</dd>

                    <dd class="dd">To connect to a secure MapR cluster enabled for wire-level security and
                        username/password authentication, set the user environment variable to the
                        system user account granted access in the MapR user or service ticket. Set
                        the group environment variable to the system group that the user account
                        belongs to.</dd>

                    <dd class="dd">For instructions on setting the user and group environment variables, see
                            <a class="xref" href="../Configuration/DCEnvironmentConfig.html#concept_htz_t1s_3v" title="When you run Data Collector as a service, Data Collector runs as the system user account and group defined in environment variables. The default system user and group are named sdc.">User and Group for Service Start</a>.</dd>

                
            </dl>

        </div>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Installation/Install_title.html" title="Installation"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"></div>
</body>
</html>