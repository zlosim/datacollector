
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Hive Metastore" /><meta name="abstract" content="The Hive Metastore destination works with the Hive Metadata processor and the Hadoop FS or MapR FS destination as part of the Drift Synchronization Solution for Hive." /><meta name="description" content="The Hive Metastore destination works with the Hive Metadata processor and the Hadoop FS or MapR FS destination as part of the Drift Synchronization Solution for Hive." /><meta name="DC.Relation" scheme="URI" content="../Destinations/Destinations-title.html" /><meta name="DC.Relation" scheme="URI" content="../Hive_Drift_Solution/HiveDriftSolution_title.html#concept_ry2_qkm_hw" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_gcr_z2t_zv" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Hive Metastore</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Destinations/Destinations-title.html" title="Destinations">Destinations</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Destinations/Destinations-title.html" title="Destinations"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Destinations</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_gcr_z2t_zv">
 <h1 class="title topictitle1">Hive Metastore</h1>

 
 <div class="body conbody"><p class="shortdesc">The Hive Metastore destination works with the Hive Metadata processor and the Hadoop FS
        or MapR FS destination as part of the Drift Synchronization Solution for Hive. </p>

        <p class="p">The Hive Metastore
            destination uses metadata records generated by the Hive Metadata processor to create and
            update Hive tables. This enables the Hadoop FS and MapR FS destinations to write
            drifting Avro or Parquet data to HDFS or MapR FS.</p>

        <p class="p">The Hive Metastore destination compares information in metadata records with Hive tables,
            and then creates or updates the tables as needed. For example, when the Hive Metadata
            processor encounters a record that requires a new Hive table, it passes a metadata
            record to the Hive Metastore destination and the destination creates the table.</p>

        <p class="p"><span class="ph">Hive table names, column names, and partition names are created
                        with lowercase letters.</span>
            Names that include uppercase letters become lowercase in Hive.</p>

        <p class="p">Note that the Hive Metastore destination does not process data. It processes only
            metadata records generated by the Hive Metadata processor and must be downstream from
            the processor's metadata output stream.</p>

        <p class="p">When you configure Hive Metastore, you define the connection information for Hive, the
            location of the Hive and Hadoop configuration files and optionally specify additional
            required properties. You can also enable Kerberos authentication. You can also set a
            maximum cache size for the destination, determine how new tables are created and stored,
            and configure custom record header attributes.</p>

        <p class="p">The destination can also generate events for an event stream. For more information about
            the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</p>

        <div class="note important"><span class="importanttitle">Important:</span> When using the destination in multiple pipelines, take care to avoid
            concurrent or conflicting writes to the same tables. </div>

        <p class="p">For more information about the Drift Synchronization Solution for Hive and case studies
            for processing Avro and Parquet data, see <a class="xref" href="../Hive_Drift_Solution/HiveDriftSolution_title.html#concept_phk_bdf_2w">Drift Synchronization Solution for Hive</a>. For a
            tutorial, check out our <a class="xref" href="https://github.com/streamsets/tutorials/blob/master/tutorial-hivedrift/readme.md" target="_blank">tutorial on Github</a>.</p>

    </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Hive_Drift_Solution/HiveDriftSolution_title.html#concept_ry2_qkm_hw" title="Hive Data Types">Hive Data Types</a></div>
</div>
</div>
<div class="topic concept nested1" id="concept_f23_cqy_dw">
 <h2 class="title topictitle2">Metadata Processing</h2>

 <div class="body conbody">
        <p class="p">When processing records, Hive
            Metastore destination performs the following tasks:</p>

  <div class="p">
            <dl class="dl">
                
                    <dt class="dt dlterm">Creates or updates Hive tables as needed</dt>

                    <dd class="dd">
                        <ol class="ol" id="concept_f23_cqy_dw__ol_f2n_4kz_dw">
                            <li class="li">For each metadata record that includes a request to create or update
                                a table, the destination checks Hive for the table. </li>

                            <li class="li">If the table in the metadata record does not exist or differs from
                                the Hive table, the destination creates or updates the table as
                                needed. <p class="p"><span class="ph">Hive table names, column names, and partition names are created
                        with lowercase letters.</span> For more information, see <a class="xref" href="../Processors/HiveMetadata.html#concept_vt5_z5l_nx">Hive Names and Supported Characters</a>.</p>
</li>

                        </ol>

                    </dd>

                    <dd class="dd">
                        <div class="note note"><span class="notetitle">Note:</span> <span class="ph" id="concept_f23_cqy_dw__d15921e2577">The destination can
                        create tables and partitions. It can add columns to tables and ignore
                        existing columns. It does not drop existing columns from tables.</span></div>

                    </dd>

                
                
                    <dt class="dt dlterm">Creates new Avro schemas as needed</dt>

                    <dd class="dd">When the Drift Synchronization Solution for Hive processes Avro data, you
                        can configure the Hive Metastore destination to generate Avro schemas. Under
                        these conditions, the Hive Metastore performs the following tasks: </dd>

                    <dd class="dd">
                        <ol class="ol" id="concept_f23_cqy_dw__ol_yj2_qkz_dw">
                            <li class="li">For each metadata record that includes a schema change, the
                                destination checks Hive for the current set of columns for the
                                specified table.</li>

                            <li class="li">When there are compatible differences, the destination generates a
                                new Avro schema that incorporates the differences. <p class="p">This can occur
                                    when a separate entity changes the target table in the moments
                                    between evaluation by the Hive Metadata processor and the Hive
                                    Metastore destination.</p>
</li>

                        </ol>

                    </dd>

                
            </dl>

        </div>

 </div>

</div>
<div class="topic concept nested1" id="concept_wyr_5jv_hw">
 <h2 class="title topictitle2">Hive Table Generation</h2>

 <div class="body conbody">
  <p class="p">When the Drift Synchronization Solution for Hive
            processes Parquet data, the destination uses the Stored as Parquet clause when
            generating the table so it does not need to generate a new schema for each change. </p>

        <div class="p">When the Drift Synchronization Solution for Hive processes Avro data, the Hive Metastore
            destination can generate Hive tables using the following methods:<dl class="dl">
                
                    <dt class="dt dlterm">With the Stored As Avro clause</dt>

                    <dd class="dd">Generates the table with a query that includes the Stored As Avro clause.
                        When using the Stored As Avro clause, the destination does not need to
                        generate an Avro schema for each change in the Hive table. </dd>

                    <dd class="dd">This is the default and recommended method for table generation. Enable the
                            <span class="ph uicontrol">Stored As Avro</span> property to use this method.</dd>

                
                
                    <dt class="dt dlterm">Without the Stored As Avro clause</dt>

                    <dd class="dd">Generates the table without a Stored As Avro clause in the query. Instead,
                        the destination generates an Avro schema for each Hive table update. The
                        destination uses the following format for the schema name:
                            <samp class="ph codeph">avro_schema_&lt;database&gt;_&lt;table&gt;_&lt;UUID&gt;.avsc</samp>. </dd>

                    <dd class="dd">The destination stores the Avro schema in HDFS. You can configure where the
                        destination saves the schemas. You can specify a full path or a path
                        relative to the table directory. By default, the destination saves the
                        schema in a <span class="ph filepath">.schemas</span> subfolder of the table directory. </dd>

                    <dd class="dd">You can configure the destination to generate and store the schemas as a
                        specified HDFS user. <span class="ph">Data
                  Collector</span> must be configured as a proxy user in HDFS.</dd>

                
            </dl>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_f4y_spy_dw">
 <h2 class="title topictitle2">Cache</h2>

 
 <div class="body conbody"><p class="shortdesc">The Hive Metastore destination queries Hive for information and caches the results. When
        possible, it uses the cache to avoid unnecessary Hive queries.</p>

  <div class="p">The destination caches the
            following Hive metadata:<ul class="ul" id="concept_f4y_spy_dw__ul_y1l_2dt_dw">
                <li class="li">Database and table to be written to</li>

                <li class="li">Hive table properties</li>

                <li class="li">Column names and types in the table</li>

                <li class="li">Partition values</li>

            </ul>
</div>

 </div>

<div class="topic concept nested2" id="concept_ovn_kdt_dw">
 <h3 class="title topictitle3">Cache Size and Evictions</h3>

 <p class="shortdesc">You can configure the maximum size of the cache. When the cache reaches the specified
        limit, it uses the LRU eviction policy, which removes the least recently used data to allow
        for new entries to be written to the cache. </p>

</div>
</div>
<div class="topic concept nested1" id="concept_drg_lwc_rx">
 <h2 class="title topictitle2">Event Generation</h2>

 <div class="body conbody">
  <div class="p">The Hive Metastore destination can
            generate events that you can use in an event stream. When you enable event generation,
            the destination creates event records each time it updates the Hive metastore, including
            when it creates a table, adds columns, or creates a partition. It also creates events
            when it generates and writes a new Avro schema file to the destination
                system.<div class="note note"><span class="notetitle">Note:</span> Updates to existing tables, columns and partitions are treated as
                creates since the destination does not change or delete existing structures.
            </div>
Hive Metastore events can be used in any logical way. For example: <ul class="ul" id="concept_drg_lwc_rx__ul_ohl_4pg_zx">
                <li class="li">With the Hive Query executor to run Hive or Impala queries after updating the
                    Hive metastore.<p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_szz_xwm_lx">Case Study: Impala Metadata Updates for DDS for Hive</a>.</p>
</li>

                <li class="li">With the HDFS File Metadata executor to move
                              or change permissions on closed files. <p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_d1q_xl4_lx">Case Study: Output File Management</a>.</p>
</li>

                <li class="li">With the Email executor to send a custom email
                              after receiving an event.<p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_t2t_lp5_xz">Case Study: Sending Email</a>.</p>
</li>

                <li class="li">With a destination to store event information.
                                    <p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_ocb_nnl_px">Case Study: Event Storage</a>.</p>
</li>

            </ul>
</div>

        <p class="p"><span class="ph">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

 </div>

<div class="topic concept nested2" id="concept_x4p_fyc_rx">
    <h3 class="title topictitle3">Event Records</h3>

    <div class="body conbody">
        <p class="p">Hive Metastore event records include the
            following event-related record header attributes. Record header attributes are stored as
            String values:</p>

        <div class="p">
            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x4p_fyc_rx__table_brz_3gp_qx" class="table" frame="border" border="1" rules="all">
                    
                    
                    <thead class="thead" align="left">
                        <tr>
                            <th class="entry" valign="top" width="30%" id="d113500e384">Record Header Attribute</th>

                            <th class="entry" valign="top" width="70%" id="d113500e387">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr>
                            <td class="entry" valign="top" width="30%" headers="d113500e384 ">sdc.event.type</td>

                            <td class="entry" valign="top" width="70%" headers="d113500e387 ">Event type. Uses one of the following types:<ul class="ul" id="concept_x4p_fyc_rx__ul_m12_mgp_qx">
                                    <li class="li">new-table - Generated when the destination creates a new
                                        table. </li>

                                    <li class="li">new-columns - Generated when the destination creates new
                                        columns. </li>

                                    <li class="li">new partition - Generated when the destination creates a new
                                        partition.</li>

                                    <li class="li">avro-schema-store - Generated when the destination generates
                                        and writes a new Avro schema file to the destination
                                        system.</li>

                                </ul>
</td>

                        </tr>

                        <tr>
       <td class="entry" valign="top" width="30%" headers="d113500e384 ">sdc.event.version</td>

       <td class="entry" valign="top" width="70%" headers="d113500e387 ">An integer that indicates the version of the event record type.</td>

      </tr>

                        <tr>
       <td class="entry" valign="top" width="30%" headers="d113500e384 ">sdc.event.creation_timestamp</td>

       <td class="entry" id="concept_x4p_fyc_rx__d15993e2087" valign="top" width="70%" headers="d113500e387 ">Epoch timestamp when the stage created the event.
       </td>

      </tr>

                    </tbody>

                </table>
</div>

        </div>

        <div class="p">Hive Metastore can generate the following types of event records: <dl class="dl">
                
                    <dt class="dt dlterm">New table</dt>

                    <dd class="dd">
                        <p class="p">The destination generates a new table event record when it creates a new
                            table.</p>

                        <div class="p">New table event records have the <samp class="ph codeph">sdc.event.type</samp> record
                            header attribute set to <samp class="ph codeph">new-table</samp> and include the
                            following field: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x4p_fyc_rx__table_dh2_5gc_rx" class="table" frame="border" border="1" rules="all">
                                    
                                    
                                    <thead class="thead" align="left">
                                        <tr>
                                            <th class="entry" valign="top" width="30%" id="d113500e473">Field</th>

                                            <th class="entry" valign="top" width="70%" id="d113500e476">Description</th>

                                        </tr>

                                    </thead>

                                    <tbody class="tbody">
                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e473 ">table</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e476 ">Fully qualified table name using the following
                                                format:
                                                <samp class="ph codeph">'&lt;DB&gt;'.'&lt;table&gt;'</samp>.</td>

                                        </tr>

                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e473 ">columns</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e476 ">A list-map field with the following information
                                                for each new column:<ul class="ul" id="concept_x4p_fyc_rx__ul_wky_yky_my">
                                                  <li class="li">Column name</li>

                                                  <li class="li">Hive data type, precision and scale</li>

                                                </ul>
<div class="p">For example: <ol class="ol" id="concept_x4p_fyc_rx__ol_ktz_tlj_4y">
                                                  <li class="li">
                                                  <ul class="ul" id="concept_x4p_fyc_rx__ul_kkj_vlj_4y">
                                                  <li class="li">key: `id`</li>

                                                  <li class="li">value: INT</li>

                                                  </ul>

                                                  </li>

                                                  <li class="li">
                                                  <ul class="ul" id="concept_x4p_fyc_rx__ul_tkm_srq_4y">
                                                  <li class="li">key: `desc`</li>

                                                  <li class="li">value: STRING</li>

                                                  </ul>

                                                  </li>

                                                  </ol>
</div>
</td>

                                        </tr>

                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e473 ">partitions</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e476 ">A list-map field with the following information:
                                                  <ul class="ul" id="concept_x4p_fyc_rx__ul_sck_zky_my">
                                                  <li class="li">Partition name</li>

                                                  <li class="li">Partition value</li>

                                                </ul>
<div class="p">For example: <ol class="ol" id="concept_x4p_fyc_rx__ol_un4_zlj_4y">
                                                  <li class="li">
                                                  <ul class="ul" id="concept_x4p_fyc_rx__ul_r3y_zlj_4y">
                                                  <li class="li">name: `dt`</li>

                                                  <li class="li">value: 2017-01-01</li>

                                                  </ul>

                                                  </li>

                                                  </ol>
</div>
</td>

                                        </tr>

                                    </tbody>

                                </table>
</div>
</div>

                    </dd>

                
                
                    <dt class="dt dlterm">New column </dt>

                    <dd class="dd">
                        <p class="p">The destination generates a new column event record when it creates new
                            columns in a table.</p>

                        <div class="p">New column event records have the <samp class="ph codeph">sdc.event.type</samp> record
                            header attribute set to <samp class="ph codeph">new-column</samp> and include the
                            following fields: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x4p_fyc_rx__table_jch_hcd_rx" class="table" frame="border" border="1" rules="all">
                                    
                                    
                                    <thead class="thead" align="left">
                                        <tr>
                                            <th class="entry" valign="top" width="30%" id="d113500e608">Field</th>

                                            <th class="entry" valign="top" width="70%" id="d113500e611">Description</th>

                                        </tr>

                                    </thead>

                                    <tbody class="tbody">
                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e608 ">table</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e611 ">Fully qualified table name using the following
                                                format: <samp class="ph codeph">&lt;db&gt;.&lt;table&gt;</samp>.</td>

                                        </tr>

                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e608 ">columns</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e611 ">A list-map field with the following information
                                                for each new column:<ul class="ul" id="concept_x4p_fyc_rx__ul_q3z_s5g_zx">
                                                  <li class="li">Column name</li>

                                                  <li class="li">Hive data type, precision and scale</li>

                                                </ul>
</td>

                                        </tr>

                                    </tbody>

                                </table>
</div>
</div>

                    </dd>

                
                
                    <dt class="dt dlterm">New partition </dt>

                    <dd class="dd">
                        <p class="p">The destination generates a new partition event record when it creates a
                            new partition in a table.</p>

                        <div class="p">New partition event records have the <samp class="ph codeph">sdc.event.type</samp>
                            record header attribute set to <samp class="ph codeph">new-partition</samp> and
                            include the following fields: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x4p_fyc_rx__table_syr_5td_rx" class="table" frame="border" border="1" rules="all">
                                    
                                    
                                    <thead class="thead" align="left">
                                        <tr>
                                            <th class="entry" valign="top" width="30%" id="d113500e682">Field</th>

                                            <th class="entry" valign="top" width="70%" id="d113500e685">Description</th>

                                        </tr>

                                    </thead>

                                    <tbody class="tbody">
                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e682 ">table</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e685 ">Fully qualified table name using the following
                                                format: <samp class="ph codeph">&lt;db&gt;.&lt;table&gt;</samp>.</td>

                                        </tr>

                                        <tr>
                                            <td class="entry" valign="top" width="30%" headers="d113500e682 ">partitions</td>

                                            <td class="entry" valign="top" width="70%" headers="d113500e685 ">A list-map field with the following information:
                                                  <ul class="ul" id="concept_x4p_fyc_rx__ul_brd_w5g_zx">
                                                  <li class="li">Partition name</li>

                                                  <li class="li">Partition value</li>

                                                </ul>
</td>

                                        </tr>

                                    </tbody>

                                </table>
</div>
</div>

                    </dd>

                
                
                    <dt class="dt dlterm">New Avro schema file</dt>

                    <dd class="dd">When the <span class="ph">Drift Synchronization Solution for Hive</span> processes Avro data and the Stored as Avro option in the destination is
                        not enabled, the destination generates and writes an Avro schema file event
                        each time it creates or updates a table. </dd>

                    <dd class="dd">New Avro schema files have the <samp class="ph codeph">sdc.event.type</samp> record header
                        attribute set to <samp class="ph codeph">avro-schema-store</samp> and include the
                        following fields:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x4p_fyc_rx__table_lbz_hvx_11b" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="30%" id="d113500e757">Field</th>

                                        <th class="entry" valign="top" width="70%" id="d113500e760">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d113500e757 ">table</td>

                                        <td class="entry" valign="top" width="70%" headers="d113500e760 ">Fully qualified table name using the following
                                            format: <samp class="ph codeph">&lt;db&gt;.&lt;table&gt;</samp>.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d113500e757 ">avro_schema</td>

                                        <td class="entry" valign="top" width="70%" headers="d113500e760 ">The new Avro schema.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d113500e757 ">schema_location</td>

                                        <td class="entry" valign="top" width="70%" headers="d113500e760 ">Location where the schema file was written.</td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</dd>

                
            </dl>
</div>

    </div>

</div>
</div>
<div class="topic concept nested1" id="concept_wsq_dgd_3w">
 <h2 class="title topictitle2">Kerberos Authentication</h2>

 <div class="body conbody">
  <p class="p">When you use Kerberos authentication, <span class="ph">Data
                  Collector</span>
            uses the Kerberos principal and keytab to connect to HiveServer2. By default, Data
            Collector uses the user account who started it to connect. </p>

        <p class="p">The Kerberos principal and keytab are defined in the <span class="ph">Data
                  Collector</span>
            configuration file,<samp class="ph codeph"> $SDC_CONF/sdc.properties</samp>. To use Kerberos
            authentication, configure all Kerberos properties in the <span class="ph">Data
                  Collector</span>
            configuration file and include the Kerberos principal in the HiveServer2 JDBC URL.</p>

        <p class="p"><span class="ph">For more information about enabling Kerberos authentication
                        for <span class="ph">Data
                  Collector</span>, see <a class="xref" href="../Configuration/DCConfig.html#concept_hnm_n4l_xs" title="You can use Kerberos authentication to connect to external systems as well as YARN clusters.">Kerberos Authentication</a>.</span></p>

 </div>

</div>
<div class="topic concept nested1" id="concept_smb_rdz_dw">
 <h2 class="title topictitle2">Hive Properties and Configuration Files</h2>

 
 <div class="body conbody"><p class="shortdesc">You must configure Hive Metastore to use Hive and Hadoop configuration files and
        individual properties.</p>

  <div class="p">
            <dl class="dl">
                
                    <dt class="dt dlterm">Configuration Files</dt>

                    <dd class="dd">
                        <div class="p">The following configuration files are required for the Hive Metastore
                                destination:<ul class="ul" id="concept_smb_rdz_dw__ul_gwv_kbs_dw">
                  <li class="li">core-site.xml</li>

                  <li class="li">hdfs-site.xml</li>

                  <li class="li">hive-site.xml</li>

            </ul>
</div>

                    </dd>

                
                
                    <dt class="dt dlterm">Individual properties</dt>

                    <dd class="dd">You can configure individual Hive properties in the destination. To add a
                        Hive property, specify the exact property name and the value. The processor
                        does not validate the property names or values.<div class="note note"><span class="notetitle">Note:</span> Individual properties
                            override properties defined in the configuration files.
                            </div>
</dd>

                
            </dl>

        </div>

 </div>

</div>
<div class="topic task nested1" id="task_a4n_1ft_zv">
    <h2 class="title topictitle2">Configuring a Hive Metastore Destination</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure a Hive Metastore
                destination to process metadata records from the Hive Metadata processor and update
                Hive tables and Avro schemas as needed.</p>

        </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_a4n_1ft_zv__table_lck_rqj_kw" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d113500e951">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d113500e954">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Stage name.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">Description</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Optional description.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">Stage Library</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Library version that you want to use. </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">Produce Events <a class="xref" href="HiveMetastore.html#concept_drg_lwc_rx">
                                            <img class="image" id="task_a4n_1ft_zv__image_xsl_2rx_mx" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Generates event records when events occur. Use for event
        handling. <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">
         <img class="image" id="task_a4n_1ft_zv__d15993e1956" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">Required Fields</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Since the destination processes only metadata records,
                                        this property is not relevant.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">Preconditions</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Since the destination processes only metadata records,
                                        this property is not relevant.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e951 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
                                            <img class="image" id="task_a4n_1ft_zv__d16131e5628" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e954 ">Error record handling for the stage: <ul class="ul" id="task_a4n_1ft_zv__d16131e5632">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="keyword wintitle">Hive</span> tab, configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_a4n_1ft_zv__table_yyp_54y_dw" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d113500e1075">Hive Property</th>

                                    <th class="entry" valign="top" width="70%" id="d113500e1078">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d113500e1075 ">JDBC URL</td>

       <td class="entry" valign="top" width="70%" headers="d113500e1078 ">JDBC URL for Hive. You can use the default, or replace the expression for the database
        name with a specific database name when appropriate.<p class="p">For more information about specifying
         the URL, see our <a class="xref" href="https://ask.streamsets.com/question/7/how-do-you-configure-a-hive-impala-jdbc-driver-for-data-collector/?answer=8#post-id-8" target="_blank">Ask StreamSets post</a>.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d113500e1075 ">JDBC Driver Name</td>

       <td class="entry" valign="top" width="70%" headers="d113500e1078 ">The fully-qualified JDBC driver name.</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d113500e1075 ">Hadoop Configuration Directory</td>

       <td class="entry" valign="top" width="70%" headers="d113500e1078 ">
        <p class="p">Absolute path to the directory containing the Hive and Hadoop configuration files. For a
         Cloudera Manager installation, enter hive-conf. </p>

        <div class="p">The stage uses the following configuration files: <ul class="ul" id="task_a4n_1ft_zv__ul_tqf_lms_dw">
                  <li class="li">core-site.xml</li>

                  <li class="li">hdfs-site.xml</li>

                  <li class="li">hive-site.xml</li>

            </ul>
</div>

        <div class="note note"><span class="notetitle">Note:</span> Properties in the configuration files are overridden by individual properties defined
         in this stage. </div>

       </td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d113500e1075 ">Additional Hadoop Configuration</td>

       <td class="entry" valign="top" width="70%" headers="d113500e1078 ">
        <p class="p">Additional properties to use. </p>

        <p class="p">To add properties, click <span class="ph uicontrol">Add</span> and define the property name and
         value. Use the property names and values as expected by HDFS and Hive.</p>

       </td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the<span class="keyword wintitle"> Advanced</span> tab, optionally configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_a4n_1ft_zv__table_gbb_dpy_dw" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d113500e1183">Advanced Property</th>

                                    <th class="entry" valign="top" width="70%" id="d113500e1186">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e1183 ">Stored as Avro <a class="xref" href="HiveMetastore.html#concept_wyr_5jv_hw">
                                            <img class="image" id="task_a4n_1ft_zv__image_lqj_pyn_lw" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e1186 ">Uses the Stored As Avro clause in the SQL commands that
                                        generate Hive tables when the Drift Synchronization Solution
                                        for Hive processes Avro data. When selected, the Avro schema
                                        URL is not included in the query.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e1183 ">Schema Folder Location</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e1186 ">Location to store the Avro schemas when Stored as Avro is
                                        not selected. <p class="p">Use a leading slash ( / ) to specify a
                                            fully-qualified path. Omit the slash to specify a path
                                            relative to the table directory. </p>
<p class="p">When not
                                            specified, the schemas are stored in the .schema
                                            sub-folder of the table directory.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e1183 ">HDFS User</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e1186 ">
                                        <p class="p">Optional HDFS user for the destination to use when
                                            generating schemas. </p>

                                    </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e1183 ">Header Attribute Expressions</td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e1186 ">When generating events, adds the specified header
                                        attributes to the event record. <p class="p">Using <a class="xref" href="../Pipeline_Configuration/SimpleBulkEdit.html#concept_alb_b3y_cbb">simple or bulk edit mode</a>, click the Add icon
                                            to include custom record header attributes. Then, enter
                                            the name and value for the attribute. </p>
You can use
                                        expressions to define the name and value to use.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d113500e1183 ">Max Cache Size (entries) <a class="xref" href="HiveMetastore.html#concept_f4y_spy_dw" title="The Hive Metastore destination queries Hive for information and caches the results. When possible, it uses the cache to avoid unnecessary Hive queries.">
                                            <img class="image" id="task_a4n_1ft_zv__image_mfn_hwx_5r" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d113500e1186 ">Maximum number of entries in the cache. <p class="p">When the cache
         reaches the maximum size, the oldest cached entries are evicted to allow for new
         data.</p>
<p class="p">Default is -1, an unlimited cache size.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Destinations/Destinations-title.html" title="Destinations"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Destinations</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"></div>
</body>
</html>