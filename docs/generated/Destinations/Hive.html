
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Hive Streaming" /><meta name="abstract" content="The Hive Streaming destination writes data to Hive tables stored in the ORC (Optimized Row Columnar) file format." /><meta name="description" content="The Hive Streaming destination writes data to Hive tables stored in the ORC (Optimized Row Columnar) file format." /><meta name="DC.Relation" scheme="URI" content="../Destinations/Destinations-title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_kvs_3hh_ht" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Hive Streaming</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Destinations/Destinations-title.html" title="Destinations">Destinations</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Destinations/Destinations-title.html" title="Destinations"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Destinations</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_kvs_3hh_ht">
 <h1 class="title topictitle1">Hive Streaming</h1>

 
 <div class="body conbody"><p class="shortdesc">The Hive Streaming destination writes data to Hive tables stored in the ORC (Optimized
  Row Columnar) file format.</p>

  <p class="p">The Hive Streaming destination requires Hive version 0.13 or
   later. Before you use the destination, verify that your Hadoop implementation supports Hive
   Streaming. </p>

  <p class="p">When configuring Hive Streaming, you specify the Hive metastore and a bucketed table stored in
   the ORC file format. You define the location of the Hive and Hadoop configuration files and
   optionally specify additional required properties. By default, the destination creates new
   partitions as needed.</p>

  <p class="p">Hive Streaming writes data to the table based on the matching field names. You can defining
   custom field mappings that override the default field mappings. </p>

  <p class="p">Before you use the Hive Streaming destination with the MapR
                  library in a pipeline, you must perform additional steps to enable <span class="ph">Data
                  Collector</span> to process MapR data. <span class="ph">For more information, see <a class="xref" href="../Installation/MapR-Prerequisites.html#concept_jgs_qpg_2v" title="Due to licensing restrictions, StreamSets cannot distribute MapR libraries with Data Collector. As a result, you must perform additional steps to enable the Data Collector machine to connect to MapR. Data Collector does not display MapR origins and destinations in stage library lists nor the MapR Streams statistics aggregator in the pipeline properties until you perform these prerequisites.">MapR Prerequisites</a>.</span>
            </p>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_xh5_y4d_br">
 <h2 class="title topictitle2">Hive Properties and Configuration Files</h2>

    <div class="body conbody">
        <div class="p">You can configure Hive Streaming to use Hive
            and Hadoop configuration files and additional properties:<dl class="dl">
                
                    <dt class="dt dlterm">Configuration files</dt>

                    <dd class="dd">The following configuration files are required for the Hive Streaming
                            destination:<ul class="ul" id="concept_xh5_y4d_br__ul_stc_qjf_lt">
                  <li class="li">core-site.xml</li>

                  <li class="li">hdfs-site.xml</li>

                  <li class="li">hive-site.xml</li>

            </ul>
</dd>

                    <dd class="dd">To use the configuration files:<ol class="ol" id="concept_xh5_y4d_br__ol_ilw_sbs_dw">
                        <li class="li">Store the files or a symlink to the files in the <span class="ph">Data
                  Collector</span> resources directory or elsewhere in a path local to the <span class="ph">Data
                  Collector</span>.</li>

                        <li class="li">If the files are stored in the resources directory, specify a relative
                              path to the files in the stage. If the files are stored outside of the
                              resources directory, specify an absolute path to the files. <div class="note note"><span class="notetitle">Note:</span> For
                                    a Cloudera Manager installation, <span class="ph">Data
                  Collector</span> automatically creates a symlink to the files named
                                          <samp class="ph codeph">hive-conf</samp>. Enter
                                          <samp class="ph codeph">hive-conf</samp> for the location of the files
                                    in the stage.</div>
</li>

                  </ol>
</dd>

                
                
                    <dt class="dt dlterm">Individual properties</dt>

                    <dd class="dd">You can configure individual Hive properties in the destination. To add a
                        Hive property, specify the exact property name and the value. The
                        destination does not validate the property names or values.<div class="note note"><span class="notetitle">Note:</span> Individual
                            properties override properties defined in the configuration files.
                            </div>
</dd>

                
            </dl>
</div>

    </div>

</div>
<div class="topic task nested1" id="task_cx3_lhh_ht">
    <h2 class="title topictitle2">Configuring a Hive Streaming Destination</h2>

    <div class="body taskbody">
        <div class="section context">Use the Hive Streaming
            destination to write data to Hive:</div>

        <ol class="ol steps" id="task_cx3_lhh_ht__steps_s3k_5hh_ht"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_cx3_lhh_ht__d16185e5592" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d112604e192">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d112604e195">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr id="task_cx3_lhh_ht__d16185e5614">
                                    <td class="entry" valign="top" width="30%" headers="d112604e192 ">Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e195 ">Stage name.</td>

                                </tr>

                                <tr id="task_cx3_lhh_ht__d16185e5623">
                                    <td class="entry" valign="top" width="30%" headers="d112604e192 ">Description</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e195 ">Optional description.</td>

                                </tr>

                                <tr id="task_cx3_lhh_ht__d16185e5632">
                                    <td class="entry" valign="top" width="30%" headers="d112604e192 ">Stage Library</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e195 ">Library version that you want to use. </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e192 ">Required Fields <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_dnj_bkm_vq">
                                            <img class="image" id="task_cx3_lhh_ht__d16185e5647" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e195 ">Fields that must include data for the record to be passed
                                        into the stage. <div class="note tip"><span class="tiptitle">Tip:</span> You might
                                            include fields that the stage uses.</div>
<p class="p">Records
                                            that do not include all required fields are processed
                                            based on the error handling configured for the
                                            pipeline.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e192 ">Preconditions <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_msl_yd4_fs">
                                            <img class="image" id="task_cx3_lhh_ht__d16185e5663" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e195 ">Conditions that must evaluate to TRUE to allow a record
                                        to enter the stage for processing. Click
                                            <span class="ph uicontrol">Add</span> to create additional
                                        preconditions. <p class="p">Records that do not meet all preconditions
                                            are processed based on the error handling configured for
                                            the stage.</p>
</td>

                                </tr>

                                <tr id="task_cx3_lhh_ht__d16185e5675">
                                    <td class="entry" valign="top" width="30%" headers="d112604e192 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
                                            <img class="image" id="task_cx3_lhh_ht__d16185e5681" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e195 ">Error record handling for the stage: <ul class="ul" id="task_cx3_lhh_ht__d16185e5685">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="keyword wintitle">Hive</span> tab, configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_cx3_lhh_ht__table_cfq_2tg_jt" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d112604e316">Hive Property</th>

                                    <th class="entry" valign="top" width="70%" id="d112604e319">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e316 ">Hive Metastore Thrift URL</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e319 ">Thrift URI for the Hive metastore. Use the following
                                        format:
                                            <pre class="pre codeblock">thrift://&lt;host&gt;:&lt;port&gt;</pre>
<p class="p">The
                                            port number is typically 9083. </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e316 ">Schema</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e319 ">Hive schema.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e316 ">Table </td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e319 ">Bucketed Hive table stored in as an ORC file.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e316 ">Hive Configuration Directory <a class="xref" href="Hive.html#concept_xh5_y4d_br">
                                            <img class="image" id="task_cx3_lhh_ht__image_wjh_ycl_br" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e319 ">
                                        <p class="p">Absolute path to the directory containing the Hive and
                                            Hadoop configuration files. For a Cloudera Manager
                                            installation, enter <samp class="ph codeph">hive-conf</samp>. </p>

                                        <div class="p">The destination uses the following configuration
                                                files:<ul class="ul" id="task_cx3_lhh_ht__ul_hgc_rjf_lt">
                  <li class="li">core-site.xml</li>

                  <li class="li">hdfs-site.xml</li>

                  <li class="li">hive-site.xml</li>

            </ul>
</div>

                                        <div class="p">
                                            <div class="note note"><span class="notetitle">Note:</span> Properties in the configuration files are
                                                overridden by individual properties defined in this
                                                destination. </div>

                                        </div>

                                    </td>

                                </tr>

                                <tr>
      <td class="entry" valign="top" width="30%" headers="d112604e316 ">Field to Column Mapping</td>

      <td class="entry" valign="top" width="70%" headers="d112604e319 ">
       <p class="p">Use to override the default field to column mappings. </p>

       <p class="p">By default, fields are written to columns of the same name. </p>

      </td>

     </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e316 ">Create Partitions</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e319 ">Automatically creates partitions when needed. Used for
                                        partitioned tables only.</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="keyword wintitle">Advanced</span> tab, optionally configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_cx3_lhh_ht__table_fqc_qln_jt" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d112604e448">Advanced Property</th>

                                    <th class="entry" valign="top" width="70%" id="d112604e451">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e448 ">Transaction Batch Size</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e451 ">The number of transactions to request in a batch for each
                                        partition in the table. For more information, see the Hive
                                        documentation. <p class="p">Default is 1000 transactions.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e448 ">Buffer Limit (KB)</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e451 ">Maximum size of the record to be written to the
                                        destination. Increase the size to accommodate larger
                                        records. <p class="p">Records that exceed the limit are handled based
                                            on the error handling configured for the stage.
                                        </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d112604e448 ">Hive Configuration</td>

                                    <td class="entry" valign="top" width="70%" headers="d112604e451 ">
                                        <p class="p">Additional Hive properties to use. Using <a class="xref" href="../Pipeline_Configuration/SimpleBulkEdit.html#concept_alb_b3y_cbb">simple or bulk edit mode</a>, click the
                                                <span class="ph uicontrol">Add</span> icon and define the
                                            property name and value. </p>

                                        <p class="p">Use the property names and values as expected by Hive.
                                        </p>

                                    </td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Destinations/Destinations-title.html" title="Destinations"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Destinations</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!--

    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

--><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>